<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LHS/RHS</title>
    <!-- #include virtual="/imports.html" -->
    <template id=dirs-files>
        <ul itemscope=DirList itemprop=subDirs>
            <li per-each="CompDirInfo of DirList">
                <details>
                    <summary itemprop=nameToDisplay></summary>
                    <template üéöÔ∏è="on when ^{details}." rel=preload src=#dirs-files></template>
                </details>
            </li>
        </ul>
        <ul itemscope=DirList itemprop=files>
            <li per-each="FileInfo of DirList">
                File: <span itemprop=name></span>
                <button name=delete>Delete</button>
            </li>
        </ul>        
    </template>
</head>
<body>
    <table>
        <thead>
            <tr>
                <th>
                    <button name=lhsDirPick disabled>Pick LHS directory</button>
                </th>
                <th>
                    <button name=rhsDirPick disabled>Pick RHS directory</button>
                </th>
            </tr>
            <tr>
                <th>Left Hand Side</th>
                <th>Right Hand Side</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <!-- lhs -->
                <td>
                    <details itemscope=CompDirInfo 
                        be-enhancing="
                            @lhsDirPick with üìÅ‚õèÔ∏è and set $0?.ish?.myHandle to directoryHandle.
                            @rhsDirPick with üìÅ‚õèÔ∏è and set $0?.ish?.yourHandle to directoryHandle.
                        ">
                        <summary itemprop=nameToDisplay></summary>
                        <template üéöÔ∏è="on when ^{details}." rel=preload src=#dirs-files></template>
                    </details>
                </td>
                <!-- rhs -->
                <td>
                    <details itemscope=CompDirInfo 
                        be-enhancing="
                            @rhsDirPick with üìÅ‚õèÔ∏è and set $0?.ish?.myHandle to directoryHandle.
                            @lhsDirPick with üìÅ‚õèÔ∏è and set $0?.ish?.yourHandle to directoryHandle.
                        ">
                        <summary itemprop=nameToDisplay></summary>
                        <template üéöÔ∏è="on when ^{details}." rel=preload src=#dirs-files></template>
                    </details>
                </td>
            </tr>
        </tbody>
    </table>

    <script type=module>
        import 'folder-picker/üìÅ‚õèÔ∏è.js';
        import 'be-enhancing/emc.js';
        
        import 'per-each/emc.js';
        import { regIsh } from 'mount-observer/refid/regIsh.js';
        import 'be-switched/üéöÔ∏è.js';

        // import { DirInfo } from '/DirInfo/DirInfo.js';
        // regIsh(document.body, 'DirInfo', DirInfo);

        import { CompDirInfo } from '/CompDirInfo/CompDirInfo.js';
        regIsh(document.body, 'CompDirInfo', CompDirInfo);

        import { DirList } from '/DirList/DirList.js';
        regIsh(document.body, 'DirList', DirList);

        import { FileInfo } from '/FileInfo/FileInfo.js';
        regIsh(document.body, 'FileInfo', FileInfo);

    </script>
</body>
</html>